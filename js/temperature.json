{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "width": 600,
  "height": 250,
  "title": "Annual Surface Temperature Change Over Time (1961-2024)",
  "data": {
    "url": "https://raw.githubusercontent.com/kaiheuheu/3179_DV2/refs/heads/main/data/23_Annual_Surface_Temperature_Change.csv"
  },
  "transform": [
    {
      "fold": [
        "1961",
        "1962",
        "1963",
        "1964",
        "1965",
        "1966",
        "1967",
        "1968",
        "1969",
        "1970",
        "1971",
        "1972",
        "1973",
        "1974",
        "1975",
        "1976",
        "1977",
        "1978",
        "1979",
        "1980",
        "1981",
        "1982",
        "1983",
        "1984",
        "1985",
        "1986",
        "1987",
        "1988",
        "1989",
        "1990",
        "1991",
        "1992",
        "1993",
        "1994",
        "1995",
        "1996",
        "1997",
        "1998",
        "1999",
        "2000",
        "2001",
        "2002",
        "2003",
        "2004",
        "2005",
        "2006",
        "2007",
        "2008",
        "2009",
        "2010",
        "2011",
        "2012",
        "2013",
        "2014",
        "2015",
        "2016",
        "2017",
        "2018",
        "2019",
        "2020",
        "2021",
        "2022",
        "2023",
        "2024"
      ],
      "as": ["Year", "TempChange"]
    },
    {
      "calculate": "toNumber(datum.TempChange)",
      "as": "TempChangeNum"
    }
  ],
  "mark": "bar",
  "encoding": {
    "x": {
      "field": "Year",
      "type": "ordinal",
      "title": "Year",
      "axis": {
        "labelAngle": 0,
        "labelExpr": "datum.value % 7 === 1 ? datum.value : ''"
      }
    },

    "y": {
      "field": "TempChangeNum",
      "type": "quantitative",
      "title": "Temperature Change (°C)"
    },
    "color": {
      "field": "TempChangeNum",
      "type": "quantitative",
      "scale": {
        "domain": [-0.52, 1.45],
        "domainMid": 0,
        "range": ["#238b45", "#f7f7f7", "#cb181d"],
        "interpolate": "rgb"
      },
      "title": "Temperature Change"
    },
    "tooltip": [
      { "field": "Year", "type": "ordinal" },
      {
        "field": "TempChangeNum",
        "type": "quantitative",
        "title": "Temperature Change (°C)",
        "format": ".2f"
      }
    ]
  },
  "config": {
    "axis": { "labelFontSize": 12, "titleFontSize": 14 },
    "bar": { "cornerRadiusTopLeft": 2, "cornerRadiusTopRight": 2 }
  }
}
